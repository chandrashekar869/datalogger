webpackJsonp([2],{"+0Jw":function(l,n,t){"use strict";function e(l){return r._28(0,[(l()(),r._7(0,null,null,3,"option",[],null,null,null,null,null)),r._5(147456,null,0,g.o,[r.k,r.E,[2,g.r]],{value:[0,"value"]},null),r._5(147456,null,0,g.w,[r.k,r.E,[8,null]],{value:[0,"value"]},null),(l()(),r._27(null,["",""]))],function(l,n){l(n,1,0,n.context.index),l(n,2,0,n.context.index)},function(l,n){l(n,3,0,n.context.$implicit)})}function u(l){return r._28(0,[(l()(),r._7(0,null,null,10,"div",[["class","col-xs-4"],["style","margin-top: 1%;"]],null,null,null,null,null)),(l()(),r._27(null,["\n                "])),(l()(),r._7(0,null,null,1,"label",[["for","startdate"]],null,null,null,null,null)),(l()(),r._27(null,["Start Date: "])),(l()(),r._7(0,null,null,5,"input",[["align","right"],["id","startdate"],["name","startDate"],["style","width:75%"],["type","date"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var e=!0,u=l.component;return"input"===n&&(e=!1!==r._21(l,5)._handleInput(t.target.value)&&e),"blur"===n&&(e=!1!==r._21(l,5).onTouched()&&e),"compositionstart"===n&&(e=!1!==r._21(l,5)._compositionStart()&&e),"compositionend"===n&&(e=!1!==r._21(l,5)._compositionEnd(t.target.value)&&e),"ngModelChange"===n&&(e=!1!==(u.startDate=t)&&e),"change"===n&&(e=!1!==u.onDateChange(0,u.startDate)&&e),e},null,null)),r._5(16384,null,0,g.d,[r.E,r.k,[2,g.a]],null,null),r._24(1024,null,g.i,function(l){return[l]},[g.d]),r._5(671744,null,0,g.n,[[8,null],[8,null],[8,null],[2,g.i]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._24(2048,null,g.j,null,[g.n]),r._5(16384,null,0,g.k,[g.j],null,null),(l()(),r._27(null,["\n                "]))],function(l,n){l(n,7,0,"startDate",n.component.startDate)},function(l,n){l(n,4,0,r._21(n,9).ngClassUntouched,r._21(n,9).ngClassTouched,r._21(n,9).ngClassPristine,r._21(n,9).ngClassDirty,r._21(n,9).ngClassValid,r._21(n,9).ngClassInvalid,r._21(n,9).ngClassPending)})}function a(l){return r._28(0,[(l()(),r._7(0,null,null,10,"div",[["class","col-xs-offest-1 col-xs-4"],["style","margin-top: 1%;"]],null,null,null,null,null)),(l()(),r._27(null,["\n                "])),(l()(),r._7(0,null,null,1,"label",[["for","enddate"]],null,null,null,null,null)),(l()(),r._27(null,["End Date: "])),(l()(),r._7(0,null,null,5,"input",[["align","right"],["id","enddate"],["name","endDate"],["style","width:75%"],["type","date"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,t){var e=!0,u=l.component;return"input"===n&&(e=!1!==r._21(l,5)._handleInput(t.target.value)&&e),"blur"===n&&(e=!1!==r._21(l,5).onTouched()&&e),"compositionstart"===n&&(e=!1!==r._21(l,5)._compositionStart()&&e),"compositionend"===n&&(e=!1!==r._21(l,5)._compositionEnd(t.target.value)&&e),"ngModelChange"===n&&(e=!1!==(u.endDate=t)&&e),"change"===n&&(e=!1!==u.onDateChange(1,u.endDate)&&e),e},null,null)),r._5(16384,null,0,g.d,[r.E,r.k,[2,g.a]],null,null),r._24(1024,null,g.i,function(l){return[l]},[g.d]),r._5(671744,null,0,g.n,[[8,null],[8,null],[8,null],[2,g.i]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._24(2048,null,g.j,null,[g.n]),r._5(16384,null,0,g.k,[g.j],null,null),(l()(),r._27(null,["\n                "]))],function(l,n){l(n,7,0,"endDate",n.component.endDate)},function(l,n){l(n,4,0,r._21(n,9).ngClassUntouched,r._21(n,9).ngClassTouched,r._21(n,9).ngClassPristine,r._21(n,9).ngClassDirty,r._21(n,9).ngClassValid,r._21(n,9).ngClassInvalid,r._21(n,9).ngClassPending)})}function o(l){return r._28(0,[(l()(),r._7(0,null,null,45,"div",[["class","container-fluid"]],null,null,null,null,null)),(l()(),r._27(null,["\n        "])),(l()(),r._7(0,null,null,42,"div",[["class","row"]],null,null,null,null,null)),(l()(),r._27(null,["            \n    "])),(l()(),r._7(0,null,null,39,"div",[["class","col-xs-8 col-xs-offset-2 col-xs-offset-right-2"],["style","border: 1px solid black;"]],null,null,null,null,null)),(l()(),r._27(null,["\n      "])),(l()(),r._7(0,null,null,26,"div",[["class","row"],["style","font-size:15px;"]],null,null,null,null,null)),(l()(),r._27(null,["\n            "])),(l()(),r._7(0,null,null,17,"div",[["class","col-xs-3"],["style","margin-top: 1%;"]],null,null,null,null,null)),(l()(),r._27(null,["\n                    "])),(l()(),r._7(0,null,null,14,"select",[["id","role"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(l,n,t){var e=!0,u=l.component;return"change"===n&&(e=!1!==r._21(l,11).onChange(t.target.value)&&e),"blur"===n&&(e=!1!==r._21(l,11).onTouched()&&e),"ngModelChange"===n&&(e=!1!==(u.select=t)&&e),"change"===n&&(e=!1!==u.onSelect(u.select)&&e),e},null,null)),r._5(16384,null,0,g.r,[r.E,r.k],null,null),r._24(1024,null,g.i,function(l){return[l]},[g.r]),r._5(671744,null,0,g.n,[[8,null],[8,null],[8,null],[2,g.i]],{model:[0,"model"]},{update:"ngModelChange"}),r._24(2048,null,g.j,null,[g.n]),r._5(16384,null,0,g.k,[g.j],null,null),(l()(),r._27(null,["\n                            "])),(l()(),r._7(0,null,null,3,"option",[["disabled",""],["hidden",""]],null,null,null,null,null)),r._5(147456,null,0,g.o,[r.k,r.E,[2,g.r]],{value:[0,"value"]},null),r._5(147456,null,0,g.w,[r.k,r.E,[8,null]],{value:[0,"value"]},null),(l()(),r._27(null,["Select Report Duration"])),(l()(),r._27(null,["\n                            "])),(l()(),r._1(16777216,null,null,1,null,e)),r._5(802816,null,0,m.i,[r.P,r.M,r.q],{ngForOf:[0,"ngForOf"]},null),(l()(),r._27(null,["\n                    "])),(l()(),r._27(null,["   \n                "])),(l()(),r._27(null,["\n                "])),(l()(),r._1(16777216,null,null,1,null,u)),r._5(16384,null,0,m.j,[r.P,r.M],{ngIf:[0,"ngIf"]},null),(l()(),r._27(null,["\n                "])),(l()(),r._1(16777216,null,null,1,null,a)),r._5(16384,null,0,m.j,[r.P,r.M],{ngIf:[0,"ngIf"]},null),(l()(),r._27(null,["\n\n            "])),(l()(),r._27(null,["\n            "])),(l()(),r._7(0,null,null,1,"p",[],null,null,null,null,null)),(l()(),r._27(null,["",""])),(l()(),r._27(null,["  \n            "])),(l()(),r._7(0,null,null,0,"br",[],null,null,null,null,null)),(l()(),r._27(null,["\n"])),(l()(),r._7(0,null,null,3,"div",[["class","row"],["id","divc"],["style","margin-left:2.5%;margin-right:2.5%"]],null,null,null,null,null)),(l()(),r._27(null,["                \n        "])),(l()(),r._7(0,null,null,0,"div",[["class","col-xs-12"],["id","donutchart"]],null,null,null,null,null)),(l()(),r._27(null,["  \n"])),(l()(),r._27(null,["    \n"])),(l()(),r._27(null,["\n    "])),(l()(),r._27(null,["\n"]))],function(l,n){var t=n.component;l(n,13,0,t.select),l(n,18,0,t.UndefinedOptionValue),l(n,19,0,t.UndefinedOptionValue),l(n,23,0,t.result),l(n,28,0,0==t.customdisabled),l(n,31,0,0==t.customdisabled)},function(l,n){var t=n.component;l(n,10,0,r._21(n,15).ngClassUntouched,r._21(n,15).ngClassTouched,r._21(n,15).ngClassPristine,r._21(n,15).ngClassDirty,r._21(n,15).ngClassValid,r._21(n,15).ngClassInvalid,r._21(n,15).ngClassPending),l(n,35,0,t.err)})}function s(l){return r._28(0,[(l()(),r._7(0,null,null,1,"app-reporting",[],null,null,null,o,D)),r._5(180224,null,0,v,[_.l,_.a,h.e],null,null)],null,null)}Object.defineProperty(n,"__esModule",{value:!0});var i,r=t("/oeL"),d=function(){function l(){}return l}(),c=[""],g=t("bm2B"),h=t("CPp0"),_=t("BkNc"),p=[],v=function(){function l(l,n,t){var e=this;this.router=l,this.route=n,this.http=t,this.title="app",this.currentDate=new Date,this.customdisabled=!0,this.startDate=this.currentDate.getFullYear()+"-"+this.currentDate.getMonth()+"-"+this.currentDate.getDate(),this.endDate=this.currentDate.getFullYear()+"-"+this.currentDate.getMonth()+"-"+this.currentDate.getDate(),this.err="",this.result=["Last 24 hours","Last 30 days","Last 1 year","Custom"];var u=this.route.snapshot.params.deviceId;console.log(u),i=u.split("~")[1],this.deviceId=u.split("~")[0],this.deviceId=this.deviceId.replace(/:/g,""),console.log(this.deviceId),this.http.post("/reporting",{param:i,deviceId:this.deviceId}).map(function(l){return l.json()}).subscribe(function(l){if(console.log(l),console.log(typeof l),"true"==i)for(var n=0;n<l.length;n++){var t=[new Date(l[n].log_time),5*Number(l[n].gas_level)];p.push(t)}else if("false"==i)for(var n=0;n<l.length;n++){var t=[new Date(l[n].log_time),6.25*Number(l[n].gas_detector)];p.push(t)}console.log(p),e.dbdata=p,google.charts.load("current",{packages:["line"]}),google.charts.setOnLoadCallback(e.drawChart)})}return l.prototype.ngOnDestroy=function(){p=[],console.log("OnDestroy called")},l.prototype.drawChart=function(){var l=new google.visualization.DataTable;l.addColumn("date","Month"),"true"==i?l.addColumn("number","Gas Level"):l.addColumn("number","Gas Leak"),console.log(p),l.addRows(void 0==p.length||0==p.length?[[new Date(this.startDate),0]]:p);var n={width:60*window.innerWidth/100,height:70*window.innerHeight/100};new google.charts.Line(document.getElementById("donutchart")).draw(l,google.charts.Line.convertOptions(n))},l.prototype.onSelect=function(l){var n=[],t=new Date;switch(Number(l)){case 0:for(var e=0;e<p.length;e++)t-p[e][0]<=864e5&&(n.push([p[e][0],p[e][1]]),console.log(n));var u=p;p=n,this.drawChart(),p=u,this.customdisabled=!0;break;case 1:for(var e=0;e<p.length;e++)t-p[e][0]<=2592e6&&(n.push([p[e][0],p[e][1]]),console.log(n));var u=p;p=n,this.drawChart(),p=u,this.customdisabled=!0;break;case 2:for(var e=0;e<p.length;e++)t-p[e][0]<=31536e6&&n.push([p[e][0],p[e][1]]);var u=p;p=n,this.drawChart(),p=u,this.customdisabled=!0;break;case 3:this.customdisabled=!1}},l.prototype.onDateChange=function(l,n){if(new Date(n),0==l&&(console.log("Startdate",n),this.startDate=n),1==l&&(console.log("EndDate",n),this.endDate=n),this.endDate<this.startDate&&this.endDate!=this.startDate)this.err="End date selected is older than start date",console.log("EndDate",this.endDate);else{this.err="";var t=[],e=new Date(this.startDate).getTime(),u=new Date(this.endDate).getTime();console.log(e+"-"+this.startDate),console.log(u+"-"+this.endDate);for(var a=0;a<p.length;a++)console.log(p[a][0].getTime()+">"+u+"&&"+p[a][0].getTime()+"<"+e),console.log("firsttime",p[a][0].getTime()),p[a][0].getTime()<=u&&(console.log("first",p[a][0].getTime()),p[a][0].getTime()>=e&&t.push([p[a][0],p[a][1]]));if(console.log(t),0==t.length){this.err="No entries found between "+this.startDate+" and "+this.endDate;var o=p;p=[[new Date(this.startDate),0]],this.drawChart(),p=o}else{var o=p;p=t,this.drawChart(),p=o}}},l}(),m=t("qbdv"),f=[c],D=r._4({encapsulation:0,styles:f,data:{}}),C=r._2("app-reporting",v,s,{},{},[]);t.d(n,"ReportingModuleNgFactory",function(){return b});var b=r._3(d,[],function(l){return r._18([r._19(512,r.j,r.Z,[[8,[C]],[3,r.j],r.v]),r._19(4608,m.l,m.k,[r.s]),r._19(4608,g.v,g.v,[]),r._19(512,m.b,m.b,[]),r._19(512,g.t,g.t,[]),r._19(512,g.e,g.e,[]),r._19(512,_.o,_.o,[[2,_.t],[2,_.l]]),r._19(512,d,d,[]),r._19(1024,_.j,function(){return[[{path:"",component:v}]]},[])])})}});